!function(){const n=window.HUGO_BASE_URL||"/",e={DEFAULT_LANGUAGE:"en",SESSIONSTORAGE_NAME:"vpadmin_lang",SUPPORTED_LANGUAGES:["en"]};let t=null,o=null;function i(e){const t=e.replace(/^\//,""),o=n.replace(/\/$/,"");return""===o?`/${t}`:`${o}/${t}`}function a(){return t||r()}function r(){const n=sessionStorage.getItem(e.SESSIONSTORAGE_NAME);if(n&&""!==n.trim()){return n.split(/[_-]/)[0]}return e.DEFAULT_LANGUAGE}function d(n,e={}){const t=a();if(!o||!o[t])return n;return(o[t][n]||n).replace(/\{(\w+)\}/g,((n,t)=>void 0!==e[t]?e[t]:n))}async function s(){t=r(),function(){const n=document.getElementById("modalTitle");n&&(n.textContent=d("loginTitle"));const e=document.getElementById("loginButton");if(e){if(localStorage.getItem("accessToken")){const n=JSON.parse(localStorage.getItem("userInfo")).user.nickName;e.textContent=`${d("logout")} (${n})`}else e.textContent=d("login")}const t=document.getElementById("userProfileButton");t&&(t.textContent=d("profile"));const o=document.getElementById("userOrdersButton");o&&(o.textContent=d("orders"))}()}window.vpadminSwitchLanguage=function(n,e){sessionStorage.setItem("vpadmin_lang",e),window.dispatchEvent(new CustomEvent("vpadmin-lang-change")),window.location.href=n.target.href},window.addEventListener("vpadmin-lang-change",s);const l=document.createElement("style");l.textContent="\n        #vpadminFloatingMenu {\n            position: fixed !important;\n            top: 20px !important;\n            right: -25px !important;\n            z-index: 999999 !important;\n            transition: right 0.3s ease !important;\n        }\n        #vpadminFloatingMenu.vpadmin-active {\n            right: 20px !important;\n        }\n        .vpadmin-floating-button {\n            width: 50px !important;\n            height: 50px !important;\n            border-radius: 50% !important;\n            background-color: rgba(52, 152, 219, 0.7) !important;\n            color: white !important;\n            border: none !important;\n            cursor: pointer !important;\n            display: flex !important;\n            align-items: center !important;\n            justify-content: center !important;\n            font-size: 24px !important;\n            box-shadow: 0 2px 5px rgba(0,0,0,0.2) !important;\n            z-index: 10000 !important;\n            user-select: none !important;\n            transition: background-color 0.3s ease !important;\n        }\n        .vpadmin-floating-button:hover {\n            background-color: rgba(52, 152, 219, 1) !important;\n        }\n        #vpadminFloatingMenu.dragging .vpadmin-floating-button {\n            background-color: rgba(231, 76, 60, 1) !important;\n            cursor: move !important;\n        }\n        .vpadmin-drag-arrows {\n            position: absolute !important;\n            left: 50% !important;\n            transform: translateX(-50%) !important;\n            display: none !important;\n            color: rgba(231, 76, 60, 1) !important;\n            font-size: 20px !important;\n            pointer-events: none !important;\n            z-index: 10001 !important;\n        }\n        .vpadmin-drag-arrows.top {\n            top: -25px !important;\n        }\n        .vpadmin-drag-arrows.bottom {\n            bottom: -25px !important;\n        }\n        #vpadminFloatingMenu.dragging .vpadmin-drag-arrows {\n            display: block !important;\n        }\n        .vpadmin-dropdown-menu {\n            display: none;\n            position: absolute !important;\n            right: 0 !important;\n            top: 60px !important;\n            background-color: white !important;\n            border-radius: 4px !important;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1) !important;\n            z-index: 999999 !important;\n            width: 200px !important;\n            padding: 5px 0 !important;\n        }\n        .vpadmin-dropdown-menu.show {\n            display: block;\n        }\n        .vpadmin-dropdown-menu a {\n            display: block !important;\n            padding: 10px 20px !important;\n            color: #333 !important;\n            text-decoration: none !important;\n            white-space: nowrap !important;\n            overflow: hidden !important;\n            text-overflow: ellipsis !important;\n        }\n        .vpadmin-dropdown-menu a:hover {\n            background-color: #f1f1f1 !important;\n        }\n        @media (max-width: 768px) {\n            #vpadminFloatingMenu {\n                top: auto !important;\n                bottom: 20px !important;\n                right: -25px !important;\n            }\n            #vpadminFloatingMenu:hover {\n                right: -25px !important;\n            }\n            #vpadminFloatingMenu.vpadmin-active {\n                right: 20px !important;\n            }\n            .vpadmin-dropdown-menu {\n                position: fixed !important;\n                right: 20px !important;\n                left: 20px !important;\n                bottom: 80px !important;\n                top: auto !important;\n                width: auto !important;\n                max-width: none !important;\n                max-height: 50vh !important;\n                overflow-y: auto !important;\n            }\n            .vpadmin-drag-arrows {\n                display: none !important;\n            }\n        }\n    ",document.head.appendChild(l);const c="http://localhost:8080",p="5852d0d82d54c49aa9efff9a4263f421",m="vpadminPassword",g="000001",u="MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAKoR8mX0rGKLqzcWmOzbfj64K8ZIgOdHnzkXSOVOZbFu/TJhZ7rFAN+eaGkl3C4buccQd/EjEsj9ir7ijT7h96MCAwEAAQ==";function v(n){return new Promise(((e,t)=>{const o=document.createElement("script");o.src=n,o.onload=e,o.onerror=t,document.head.appendChild(o)}))}Promise.all([v(i("vpadmin/crypto-js.min.js")),v(i("vpadmin/jsencrypt.min.js"))]).then((async()=>{try{await async function(){try{const n=i("vpadmin/MenusTranslations.json"),r=await fetch(n);if(!r.ok)throw new Error("Failed to load translations");o=await r.json(),e.DEFAULT_LANGUAGE=o.default,t=a(),await s(),console.log("initializeI18n success")}catch(n){console.error("initializeI18n failed",n),o={}}}(),function(n,e){let t=!1,o="",a=i("vpadmin/profile.svg"),r=1,s="";const l={github:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>',gitlab:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M23.955 13.587l-1.342-4.135-2.664-8.189a.455.455 0 0 0-.867 0L16.418 9.45H7.582L4.918 1.263a.455.455 0 0 0-.867 0L1.386 9.45.044 13.587a.924.924 0 0 0 .331 1.03L12 23.054l11.625-8.436a.92.92 0 0 0 .33-1.031"/></svg>',google:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"/></svg>',facebook:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>',wechat:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8.691 2.188C3.891 2.188 0 5.476 0 9.53c0 2.212 1.17 4.203 3.002 5.55a.59.59 0 0 1 .213.665l-.39 1.48c-.019.07-.048.141-.048.213 0 .163.13.295.29.295a.326.326 0 0 0 .167-.054l1.903-1.114a.864.864 0 0 1 .717-.074 10.16 10.16 0 0 0 2.837.403c.276 0 .543-.027.81-.05-.857-2.578.157-4.972 1.932-6.446 1.703-1.415 3.882-1.98 5.853-1.838-.576-3.583-4.196-6.372-8.595-6.372zM5.662 5.647a.956.956 0 1 1 0 1.912.956.956 0 0 1 0-1.912zm6.064 0a.956.956 0 1 1 0 1.912.956.956 0 0 1 0-1.912zM24 15.131c0-3.407-3.314-6.169-7.388-6.169-4.073 0-7.387 2.762-7.387 6.169s3.314 6.169 7.387 6.169c.87 0 1.705-.103 2.472-.29a.775.775 0 0 1 .653.06l1.715.99a.273.273 0 0 0 .139.04c.134 0 .243-.108.243-.243a.657.657 0 0 0-.042-.184l-.351-1.325a.49.49 0 0 1 .183-.572c1.558-1.139 2.375-2.758 2.375-4.644zm-9.749-1.969a.826.826 0 1 1 0 1.653.826.826 0 0 1 0-1.653zm5.246 0a.826.826 0 1 1 0 1.653.826.826 0 0 1 0-1.653z"/></svg>'},v=document.createElement("div");function f(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e="";const t=n.length;for(let o=0;o<32;o++)e+=n.charAt(Math.floor(Math.random()*t));return e}function h(){return n.enc.Utf8.parse(f())}function y(e){return n.enc.Base64.stringify(e)}function w(e,t){return n.AES.encrypt(e,t,{mode:n.mode.ECB,padding:n.pad.Pkcs7}).toString()}function b(n){const t=new e;return t.setPublicKey(u),t.encrypt(n)}function x(n,e={}){const o={headers:{"Content-Type":"application/json",clientid:p},mode:"cors",credentials:"include"},i={...o,...e,headers:{...o.headers,...e.headers}},a="false"!==i.headers.isToken,r=localStorage.getItem("accessToken");a&&r&&"/auth/register"!==n&&(i.headers.Authorization=`Bearer ${r}`);if("false"===i.headers.repeatSubmit&&("POST"===i.method||"PUT"===i.method)){const e={url:n,data:"object"==typeof i.body?JSON.stringify(i.body):i.body,time:(new Date).getTime()},t=sessionStorage.getItem("sessionObj")?JSON.parse(sessionStorage.getItem("sessionObj")):{};if(t.url===e.url&&t.data===e.data&&e.time-t.time<500)return Promise.reject(new Error(d("dataProcessingNoRepeat")));sessionStorage.setItem("sessionObj",JSON.stringify(e))}const s="true"===i.headers.isEncrypt;if("GET"!==i.method&&i.body&&"object"==typeof i.body)if(s){const n=h(),e=b(y(n));i.headers["Encrypt-Key"]=e,i.body=w(JSON.stringify(i.body),n)}else i.body=JSON.stringify(i.body);if("GET"===i.method&&e.params){const t=new URLSearchParams(e.params);n+=(n.includes("?")?"&":"?")+t.toString(),delete i.params}return"GET"===i.method&&delete i.body,fetch(`${c}${n}`,i).then((async n=>{const e=await n.json();if(401===n.status)return console.error("Unauthorized access"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userInfo"),Promise.reject(new Error("Unauthorized access"));if(403===n.status)return console.error("Forbidden"),Promise.reject(new Error("Forbidden"));if(!n.ok)throw new Error(e.msg||"Network response was not ok");return 401===e.code?(t=!1,mn(),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userInfo"),Q(),Promise.reject(new Error(e.msg))):200!==e.code?(gn(e.msg,"error"),Promise.reject(new Error(e.msg))):e})).catch((n=>(console.error("API Request Error:",n),n.message!==d("dataProcessingNoRepeat")&&gn(n.message||"Request failed","error"),Promise.reject(n))))}v.id="vpadmin-overlay",v.innerHTML='\n            <div class="vpadmin-overlay-content">\n                <div class="vpadmin-spinner"></div>\n                <p id="vpadmin-overlay-message"></p>\n            </div>\n        ',document.body.appendChild(v);const E=document.createElement("div");E.id="vpadminFloatingMenu",E.innerHTML=`\n            <button class="vpadmin-floating-button" id="vpadminMenuToggle" title="${d("toggleMenu")}">☰</button>\n            <div class="vpadmin-drag-arrows top" title="${d("dragToMove")}">▲</div>\n            <div class="vpadmin-drag-arrows bottom" title="${d("dragToMove")}">▼</div>\n            <div class="vpadmin-dropdown-menu" id="vpadminDropdownMenu">\n                <a href="#" id="userProfileButton" title="${d("viewProfile")}">${d("profile")}</a>\n                <a href="#" id="userOrdersButton" title="${d("viewOrders")}">${d("orders")}</a>\n                <a href="#" id="loginButton" title="${d("loginOrRegister")}">${d("login")}</a>\n            </div>\n        `,document.body.appendChild(E);const k=document.createElement("div");k.id="loginModal",k.className="vpadmin-modal-overlay",k.innerHTML=`\n            <div class="vpadmin-modal-content">\n                <span class="vpadmin-modal-close">&times;</span>\n                <h2 id="modalTitle">${d("loginTitle")}</h2>\n                <form id="loginForm" class="vpadmin-modal-form">\n                    <input type="email" id="loginEmail" placeholder="${d("enterEmail")}" required autocomplete="username">\n                    <div class="vpadmin-password-input-container">\n                        <div class="vpadmin-password-input-wrapper">\n                            <input type="password" id="password" placeholder="${d("enterPassword")}" required autocomplete="current-password">\n                            <button type="button" class="vpadmin-toggle-password" data-target="password">\n                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="vpadmin-eye-icon"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="vpadmin-captcha-container">\n                        <input type="text" id="captcha" placeholder="${d("enterCaptcha")}" required>\n                        <img id="captchaImage" alt="${d("captchaImage")}">\n                    </div>\n                    <button type="submit" class="vpadmin-login-button">${d("loginButton")}</button>\n                    <div class="vpadmin-form-links">\n                        <a href="#" id="registerLink">${d("registerNow")}</a>\n                        <a href="#" id="forgotPasswordLink">${d("forgotPassword")}</a>\n                    </div>\n                </form>\n                <form id="registerForm" class="vpadmin-modal-form" style="display: none;">\n                    <input type="email" id="registerEmail" placeholder="${d("enterEmail")}" required autocomplete="email">\n                    <div class="vpadmin-password-input-container">\n                        <div class="vpadmin-password-input-wrapper">\n                            <input type="password" id="registerPassword" placeholder="${d("enterPassword")}" required autocomplete="new-password">\n                            <button type="button" class="vpadmin-toggle-password" data-target="registerPassword">\n                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="vpadmin-eye-icon"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="vpadmin-password-input-container">\n                        <div class="vpadmin-password-input-wrapper">\n                            <input type="password" id="confirmPassword" placeholder="${d("confirmPassword")}" required autocomplete="new-password">\n                            <button type="button" class="vpadmin-toggle-password" data-target="confirmPassword">\n                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="vpadmin-eye-icon"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="vpadmin-captcha-container">\n                        <input type="text" id="registerCaptcha" placeholder="${d("enterCaptcha")}" required>\n                        <img id="registerCaptchaImage" alt="${d("captchaImage")}">\n                    </div>\n                    <button type="submit" class="vpadmin-login-button">${d("registerButton")}</button>\n                    <div class="vpadmin-form-links">\n                        <a href="#" id="backToLoginLink">${d("backToLogin")}</a>\n                    </div>\n                </form>\n                <form id="forgotPasswordForm" class="vpadmin-modal-form" style="display: none;">\n                    <div id="forgotStep1">\n                        <input type="email" id="forgotEmail" placeholder="${d("enterEmail")}" required autocomplete="email">\n                        <div class="vpadmin-captcha-container">\n                            <input type="text" id="forgotCaptcha" placeholder="${d("enterCaptcha")}" required>\n                            <img id="forgotCaptchaImage" alt="${d("captchaImage")}">\n                        </div>\n                        <button type="button" id="sendEmailCode" class="vpadmin-login-button">\n                            <span class="button-text">${d("sendEmailCode")}</span>\n                            <span class="button-loader">${d("sendingEmailCode")}</span>\n                        </button>\n                    </div>\n                    <div id="forgotStep2" style="display: none;">\n                        <input type="text" id="emailCode" placeholder="${d("emailCodeInputTitle")}" required>\n                        <button type="button" id="verifyEmailCode" class="vpadmin-login-button">${d("verify")}</button>\n                    </div>\n                    <div id="forgotStep3" style="display: none;">\n                        <div class="vpadmin-password-input-container">\n                            <div class="vpadmin-password-input-wrapper">\n                                <input type="password" id="forgotNewPassword" placeholder="${d("enterNewPassword")}" required autocomplete="new-password">\n                                <button type="button" class="vpadmin-toggle-password" data-target="forgotNewPassword">\n                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="vpadmin-eye-icon"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>\n                                </button>\n                            </div>\n                        </div>\n                        <div class="vpadmin-password-input-container">\n                            <div class="vpadmin-password-input-wrapper">\n                                <input type="password" id="forgotConfirmNewPassword" placeholder="${d("confirmNewPassword")}" required autocomplete="new-password">\n                                <button type="button" class="vpadmin-toggle-password" data-target="forgotConfirmNewPassword">\n                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="vpadmin-eye-icon"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>\n                                </button>\n                            </div>\n                        </div>\n                        <button type="submit" class="vpadmin-login-button">${d("resetPasswordButton")}</button>\n                    </div>\n                    <div class="vpadmin-form-links">\n                        <a href="#" id="backToLoginFromForgotLink">${d("backToLogin")}</a>\n                    </div>\n                </form>\n                <div class="vpadmin-third-party-login">\n                    <p>${d("thirdPartyLogin")}</p>\n                    <div class="vpadmin-social-icons">\n                        ${Object.entries(l).map((([n,e])=>`\n                            <button id="${n}Login" class="vpadmin-social-button ${n}">${e}</button>\n                        `)).join("")}\n                    </div>\n                </div>\n            </div>\n        `,document.body.appendChild(k);const C=document.createElement("div");C.id="vpadmin-toast",C.className="vpadmin-toast",document.body.appendChild(C);const I=document.createElement("style");I.textContent="\n            .vpadmin-toast {\n                position: fixed;\n                top: 20px;\n                left: 50%;\n                transform: translateX(-50%);\n                max-width: 300px;\n                width: auto;\n                background-color: #333;\n                color: #fff;\n                padding: 10px 20px;\n                border-radius: 4px;\n                opacity: 0;\n                transition: opacity 0.3s ease-in-out;\n                z-index: 10001;\n                text-align: center;\n            }\n            .vpadmin-toast.show {\n                opacity: 1;\n            }\n            .vpadmin-toast.success {\n                background-color: #4CAF50;\n            }\n            .vpadmin-toast.error {\n                background-color: #F44336;\n            }\n/*            @media (max-width: 480px) {\n                .vpadmin-toast {\n                    max-width: 90%;\n                    width: 90%;\n                }\n            }*/\n        ",document.head.appendChild(I);const L=document.createElement("style");L.textContent="\n            .vpadmin-modal-overlay {\n                display: none;\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 10000;\n            }\n            .vpadmin-modal-content {\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                background-color: white;\n                padding: 20px;\n                border-radius: 5px;\n                width: 30%;\n                max-width: 500px;\n                min-width: 280px;\n                box-sizing: border-box;\n                color-scheme: light;\n                color: #1d2d35;\n            }\n            .vpadmin-modal-content * {\n                background-color: transparent;\n                color: inherit;\n            }\n            @media (max-width: 600px) {\n                .vpadmin-modal-content {\n                    padding: 15px;\n                }\n            }\n            \n            @media (min-width: 1200px) {\n                .vpadmin-modal-content {\n                    max-width: 700px;\n                }\n            }\n            .vpadmin-modal-close {\n                position: absolute;\n                top: 10px;\n                right: 10px;\n                font-size: 20px;\n                cursor: pointer;\n            }\n            .vpadmin-modal-form input {\n                width: 100%;\n                padding: 10px;\n                margin: 10px 0;\n                border: 1px solid #ddd;\n                border-radius: 4px;\n                box-sizing: border-box;\n            }\n            .vpadmin-login-button {\n                width: 100%;\n                padding: 10px;\n                background-color: #3498db;\n                color: white;\n                border: none;\n                border-radius: 4px;\n                cursor: pointer;\n            }\n            .vpadmin-login-button:hover {\n                background-color: #2980b9;\n            }\n            .vpadmin-captcha-container {\n                display: flex;\n                align-items: center;\n                margin: 10px 0;\n            }\n            .vpadmin-captcha-container input {\n                flex: 1;\n                margin: 0 10px 0 0;\n            }\n            .vpadmin-captcha-container img {\n                height: 38px;\n                border: 1px solid #ddd;\n                border-radius: 4px;\n                cursor: pointer;\n                padding: 0;\n            }\n            .vpadmin-third-party-login {\n                margin-top: 20px;\n                text-align: center;\n            }\n            .vpadmin-social-icons {\n                display: flex;\n                justify-content: center;\n                gap: 10px;\n                margin-top: 10px;\n            }\n            .vpadmin-social-button {\n                width: 30px;\n                height: 30px;\n                border: none;\n                border-radius: 50%;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                cursor: pointer;\n                transition: opacity 0.3s;\n                padding: 0;\n            }\n            .vpadmin-social-button:hover {\n                opacity: 0.8;\n            }\n            .vpadmin-social-button svg {\n                width: 20px;\n                height: 20px;\n            }\n            .vpadmin-social-button.disabled {\n                opacity: 0.5;\n                cursor: not-allowed;\n                background-color: white !important;\n            }\n\n            .vpadmin-social-button.disabled svg {\n                fill: #999;\n            }\n            .vpadmin-social-button.github { background-color: #24292e; }\n            .vpadmin-social-button.gitlab { background-color: #FC6D26; }\n            .vpadmin-social-button.google { background-color: #DB4437; }\n            .vpadmin-social-button.facebook { background-color: #4267B2; }\n            .vpadmin-social-button.wechat { background-color: #7BB32E; }\n            .vpadmin-social-button svg { fill: white; }\n            .vpadmin-tabs {\n                display: flex;\n                margin-bottom: 20px;\n            }\n            .vpadmin-tab {\n                flex: 1;\n                padding: 10px;\n                background-color: #f1f1f1;\n                border: none;\n                cursor: pointer;\n            }\n            .vpadmin-tab.active {\n                background-color: #3498db;\n                color: white;\n            }\n            .vpadmin-form-links {\n                display: flex;\n                justify-content: space-between;\n                margin-top: 15px;\n            }\n            .vpadmin-form-links a {\n                color: #3498db;\n                text-decoration: none;\n            }\n            .vpadmin-form-links a:hover {\n                text-decoration: underline;\n            }\n            .vpadmin-error-message {\n                color: #F44336;\n                font-size: 12px;\n                margin-top: 5px;\n            }\n            .vpadmin-login-button:disabled {\n                background-color: #cccccc;\n                cursor: not-allowed;\n            }\n            .vpadmin-login-button .button-loader {\n                display: none;\n            }\n            .vpadmin-login-button.loading .button-text {\n                display: none;\n            }\n            .vpadmin-login-button.loading .button-loader {\n                display: inline;\n            }\n            .vpadmin-password-input-container {\n                position: relative;\n                display: flex;\n                flex-direction: column;\n                margin-bottom: 15px;\n            }\n            .vpadmin-password-input-wrapper {\n                position: relative;\n                display: flex;\n                align-items: center;\n            }\n            .vpadmin-password-input-container input {\n                flex: 1;\n                width: 100%;\n            }\n            .vpadmin-toggle-password {\n                position: absolute;\n                right: 10px;\n                top: 50%;\n                transform: translateY(-50%);\n                background: none;\n                border: none;\n                cursor: pointer;\n                padding: 0;\n                height: 100%;\n                display: flex;\n                align-items: center;\n            }\n            .vpadmin-eye-icon {\n                width: 20px;\n                height: 20px;\n                color: #666;\n            }\n            .vpadmin-error-message {\n                color: #F44336;\n                font-size: 12px;\n                margin-top: 5px;\n                order: 2;\n            }\n        ",document.head.appendChild(L);const T=document.createElement("style");T.textContent="\n            #vpadmin-overlay {\n                display: none;\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 10000;\n                justify-content: center;\n                align-items: center;\n            }\n            .vpadmin-overlay-content {\n                background-color: white;\n                padding: 20px;\n                border-radius: 5px;\n                text-align: center;\n            }\n            .vpadmin-spinner {\n                border: 4px solid #f3f3f3;\n                border-top: 4px solid #3498db;\n                border-radius: 50%;\n                width: 40px;\n                height: 40px;\n                animation: vpadmin-spin 1s linear infinite;\n                margin: 0 auto 10px;\n            }\n            @keyframes vpadmin-spin {\n                0% { transform: rotate(0deg); }\n                100% { transform: rotate(360deg); }\n            }\n        ",document.head.appendChild(T);const S=document.getElementById("vpadminMenuToggle"),B=document.getElementById("vpadminDropdownMenu"),$=document.getElementById("loginButton"),P=document.getElementById("loginModal"),z=k.querySelector(".vpadmin-modal-close"),F=document.getElementById("loginForm"),M=document.getElementById("registerForm");let N,j,A=!1,O=!1;const q=window.innerWidth<=768;function D(n){n.stopPropagation(),A=!A,E.classList.toggle("vpadmin-active",A),B.classList.toggle("show",A)}function H(){A=!1,E.classList.remove("vpadmin-active"),B.classList.remove("show")}function U(n){!q&&E.getBoundingClientRect().right<=window.innerWidth&&(O=!0,N=n.clientY,j=E.getBoundingClientRect().top,E.classList.add("dragging"),n.preventDefault())}function G(n){if(O){let e=j+(n.clientY-N);e=Math.max(0,Math.min(e,window.innerHeight-S.offsetHeight)),E.style.setProperty("top",`${e}px`,"important"),E.style.setProperty("bottom","auto","important")}}function R(){O&&(O=!1,E.classList.remove("dragging"))}function _(n){const e=n.currentTarget,t=e.getAttribute("data-target"),o=document.getElementById(t),i="password"===o.getAttribute("type")?"text":"password";o.setAttribute("type",i);const a=e.querySelector(".vpadmin-eye-icon");a.innerHTML="password"===i?'<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>':'<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>'}document.querySelectorAll(".vpadmin-toggle-password").forEach((n=>{n.addEventListener("click",_)})),S.addEventListener("click",(function(n){O||D(n)})),document.addEventListener("click",(function(n){return A&&!E.contains(n.target)&&H(),!0})),B.addEventListener("click",(function(n){H(),n.preventDefault()})),q||(S.addEventListener("mousedown",U),document.addEventListener("mousemove",G),document.addEventListener("mouseup",R),E.addEventListener("mouseenter",(function(){O||E.classList.add("vpadmin-active")})),E.addEventListener("mouseleave",(function(){A||O||E.classList.remove("vpadmin-active")})));function J(){const n=document.getElementById("loginEmail"),e=document.getElementById("registerEmail"),t=document.getElementById("registerPassword"),o=document.getElementById("confirmPassword"),i=document.getElementById("forgotEmail"),a=document.getElementById("forgotNewPassword"),r=document.getElementById("forgotConfirmNewPassword"),d=document.getElementById("registerCaptchaImage"),s=document.getElementById("forgotCaptchaImage"),l=document.getElementById("captchaImage");d.addEventListener("click",(()=>an("registerCaptchaImage"))),s.addEventListener("click",(()=>an("forgotCaptchaImage"))),l.addEventListener("click",(()=>an("captchaImage"))),n.addEventListener("blur",(()=>Y("loginEmail",X))),e.addEventListener("blur",(()=>Y("registerEmail",X))),t.addEventListener("blur",(()=>Y("registerPassword",nn))),o.addEventListener("blur",(()=>Y("confirmPassword",en))),i.addEventListener("blur",(()=>Y("forgotEmail",X))),a.addEventListener("blur",(()=>Y("forgotNewPassword",nn))),r.addEventListener("blur",(()=>Y("forgotConfirmNewPassword",tn)))}function Y(n,e){const t=document.getElementById(n).value.trim();K(n);const o=e(t);return!o||(V(n,o),!1)}function K(n){const e=document.getElementById(n);if("registerEmail"===n||"forgotEmail"===n||"loginEmail"===n){const e=document.querySelector(`#${n} + .vpadmin-error-message`);e&&e.remove()}else{const n=(e.closest(".vpadmin-password-input-container")||e.parentNode).querySelector(".vpadmin-error-message");n&&n.remove()}}function V(n,e){K(n);const t=document.getElementById(n),o=document.createElement("div");if(o.className="vpadmin-error-message",o.textContent=e,"registerEmail"===n||"forgotEmail"===n||"loginEmail"===n)t.parentNode.insertBefore(o,t.nextSibling);else{(t.closest(".vpadmin-password-input-container")||t.parentNode).appendChild(o)}}function Q(){P.style.display="block",W("loginForm"),an("captchaImage"),rn(),J()}function W(n){["loginForm","registerForm","forgotPasswordForm"].forEach((e=>{const t=document.getElementById(e);t&&(t.style.display=e===n?"block":"none")}));const e=document.getElementById("modalTitle");switch(n){case"loginForm":e.textContent=d("loginTitle"),an("captchaImage");break;case"registerForm":e.textContent=d("registerTitle"),an("registerCaptchaImage");break;case"forgotPasswordForm":e.textContent=d("passwordRecovery"),on(1),an("forgotCaptchaImage")}Z(),"forgotPasswordForm"!==n&&(r=1,s="");const t=document.querySelector(".vpadmin-third-party-login");t&&(t.style.display="loginForm"===n?"block":"none")}function Z(){document.querySelectorAll(".vpadmin-error-message").forEach((n=>n.remove()))}function X(n){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?null:d("invalidEmail")}function nn(n){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(n)?null:d("invalidPassword")}function en(n){return document.getElementById("registerPassword").value===n?null:d("passwordMismatch")}function tn(n){return document.getElementById("forgotNewPassword").value===n?null:d("passwordMismatch")}function on(n){document.getElementById("forgotStep1").style.display=1===n?"block":"none",document.getElementById("forgotStep2").style.display=2===n?"block":"none",document.getElementById("forgotStep3").style.display=3===n?"block":"none",r=n}function an(n){const e=document.getElementById(n);x("/auth/code",{method:"GET",headers:{isToken:"false"}}).then((n=>{200===n.code&&n.data.captchaEnabled?(e.src=`data:image/png;base64,${n.data.img}`,e.dataset.uuid=n.data.uuid):(console.error("Failed to get captcha"),e.alt=d("captchaLoadError"))})).catch((n=>{console.error("Error fetching captcha:",n),e.alt=d("captchaLoadError")}))}function rn(){x("/vpadmin/thirdPartyLoginConfig/oauth",{method:"GET",headers:{isToken:"false"},params:{tenant:g,clientId:p}}).then((n=>{if(200===n.code){const e=n.data,t=new Set(e.map((n=>n.platform)));document.querySelectorAll(".vpadmin-social-button").forEach((n=>{const o=n.id.replace("Login","");if(t.has(o)){n.disabled=!1,n.classList.remove("disabled");const t=e.find((n=>n.platform===o));n.setAttribute("data-status",t.status)}else n.disabled=!0,n.classList.add("disabled"),n.removeAttribute("data-status")}))}else console.error("Get ThirdPartyLoginConfig failed:",n.msg),alert(d("socialLoginFailed")+": "+n.msg)})).catch((n=>{console.error("Error during Get ThirdPartyLoginConfig:",n),alert(d("socialLoginErrorRetry"))}))}function dn(n){x(`/auth/binding/${n}`,{method:"GET",params:{tenantId:g,clientId:p,domain:window.location.origin,redirect:window.location.href}}).then((n=>{200===n.code?window.location.href=n.data:(console.error("Social login failed:",n.msg),alert(d("socialLoginFailed")+": "+n.msg))})).catch((n=>{console.error("Error during social login:",n),alert(d("socialLoginErrorRetry"))}))}function sn(){if(!window.location.pathname.endsWith("/social-callback"))return;const n=document.getElementById("vpadmin-overlay"),e=document.getElementById("vpadmin-overlay-message");function t(t){e.textContent=t,n.style.display="flex"}function o(){n.style.display="none"}t(d("processingCallback"));const i=new URLSearchParams(window.location.search),a=i.get("code"),r=i.get("state"),s=i.get("source");if(a&&r&&s){const n=JSON.parse(atob(r)),e=n.domain,i=n.redirect;if(e!==window.location.origin){let n=new URL(window.location.href);return n.host=e,void(window.location.href=n.toString())}x("/auth/portal/social/callback",{method:"POST",headers:{"Content-Type":"application/json",isToken:"false"},body:JSON.stringify({socialCode:a,socialState:r,tenantId:g,source:s,clientId:p,grantType:"socialPortal"})}).then((n=>{if(200!==n.code)throw new Error(n.msg||"Login failed");console.log("Social login successful"),localStorage.setItem("accessToken",n.data.access_token),localStorage.setItem("refreshToken",n.data.refresh_token),t(d("loginSuccess")),setTimeout((()=>{o(),window.location.href=n.data.redirect||i||"/"}),2e3)})).catch((n=>{console.error("Error during social login callback:",n),t(d("loginFailed")),setTimeout((()=>{o(),window.location.href=i||"/"}),2e3)}))}else console.error("Invalid callback parameters"),t(d("invalidCallbackParameters")),setTimeout((()=>{o(),window.location.href="/"}),2e3)}async function ln(n){t=!0,localStorage.setItem("accessToken",n.access_token),localStorage.setItem("refreshToken",n.refresh_token),P.style.display="none",a=i("vpadmin/profile_blue.svg"),await cn(),mn(),gn(d("loginSuccess"),"success")}async function cn(){try{const n=await x("/system/user/getInfo",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(200!==n.code)throw new Error(n.msg||"Failed to get user info");o=n.data.user.nickName,localStorage.setItem("userInfo",JSON.stringify(n.data))}catch(n){console.error("Error fetching user info:",n),pn()}}async function pn(){try{await x("/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})}catch(n){console.error("Logout error:",n),gn(d("logoutFailed"),"error")}finally{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userInfo"),t=!1,o="",a=i("vpadmin/profile.svg"),mn(),gn(d("logoutSuccess"),"success")}}function mn(){t?($.textContent=`${d("logout")} (${o})`,$.onclick=pn):($.textContent=d("login"),$.onclick=Q);const n=document.querySelector(".user-menu img");n&&(n.src=a)}function gn(n,e="info",t=3e3){const o=document.getElementById("vpadmin-toast");o.textContent=n,o.className=`vpadmin-toast show ${e}`,setTimeout((()=>{o.className="vpadmin-toast"}),t)}function un(n){const e=document.createElement("div");e.className="vpadmin-modal-overlay",e.style.display="block",e.innerHTML=`\n                <div class="vpadmin-profile-dialog">\n                    <div class="vpadmin-profile-dialog-content">\n                        <div class="vpadmin-profile-dialog-header">\n                            <h3>${d("personalInformation")}</h3>\n                            <button class="vpadmin-profile-dialog-close">&times;</button>\n                        </div>\n                        <div class="vpadmin-profile-dialog-body">\n                            <div class="vpadmin-profile-container">\n                                <div class="vpadmin-profile-header">\n                                    <img src="${a}" alt="User Avatar" class="vpadmin-profile-avatar"/>\n                                </div>\n                                <div class="vpadmin-profile-items">\n                                    <div class="vpadmin-profile-item">\n                                        <span class="vpadmin-icon-wrapper">\n                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>\n                                                <circle cx="12" cy="7" r="4"></circle>\n                                            </svg>\n                                        </span>\n                                        <span class="vpadmin-profile-label">${d("username")}</span>\n                                        <span class="vpadmin-profile-value">${n.user.userName}</span>\n                                    </div>\n                                    <div class="vpadmin-profile-item">\n                                        <span class="vpadmin-icon-wrapper">\n                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>\n                                                <polyline points="22,6 12,13 2,6"></polyline>\n                                            </svg>\n                                        </span>\n                                        <span class="vpadmin-profile-label">${d("email")}</span>\n                                        <span class="vpadmin-profile-value">${n.user.email}</span>\n                                    </div>\n                                    <div class="vpadmin-profile-item">\n                                        <span class="vpadmin-icon-wrapper">\n                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>\n                                                <circle cx="9" cy="7" r="4"></circle>\n                                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>\n                                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>\n                                            </svg>\n                                        </span>\n                                        <span class="vpadmin-profile-label">${d("userRoles")}</span>\n                                        <span class="vpadmin-profile-value">${n.roleGroup}</span>\n                                    </div>\n                                    <div class="vpadmin-profile-item">\n                                        <span class="vpadmin-icon-wrapper">\n                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>\n                                                <line x1="16" y1="2" x2="16" y2="6"></line>\n                                                <line x1="8" y1="2" x2="8" y2="6"></line>\n                                                <line x1="3" y1="10" x2="21" y2="10"></line>\n                                            </svg>\n                                        </span>\n                                        <span class="vpadmin-profile-label">${d("creationTime")}</span>\n                                        <span class="vpadmin-profile-value">${n.user.createTime}</span>\n                                    </div>\n                                    <div class="vpadmin-profile-item">\n                                        <span class="vpadmin-icon-wrapper">\n                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                                <circle cx="12" cy="12" r="10"></circle>\n                                                <polyline points="12 6 12 12 16 14"></polyline>\n                                            </svg>\n                                        </span>\n                                        <span class="vpadmin-profile-label">${d("lastLogin")}</span>\n                                        <span class="vpadmin-profile-value">${n.user.loginDate}</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            `;const t=document.createElement("style");t.textContent="\n                .vpadmin-profile-dialog {\n                    position: fixed;\n                    top: 50%;\n                    left: 50%;\n                    transform: translate(-50%, -50%);\n                    background: white;\n                    border-radius: 8px;\n                    width: 90%;\n                    max-width: 500px;\n                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n                    z-index: 10001;\n                }\n        \n                .vpadmin-profile-dialog-content {\n                    position: relative;\n                    background-color: white;\n                    border-radius: 8px;\n                    overflow: hidden;\n                }\n        \n                .vpadmin-profile-dialog-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    padding: 16px 20px;\n                    border-bottom: 1px solid #eee;\n                }\n        \n                .vpadmin-profile-dialog-header h3 {\n                    margin: 0;\n                    font-size: 18px;\n                    color: #333;\n                }\n        \n                .vpadmin-profile-dialog-close {\n                    background: none;\n                    border: none;\n                    font-size: 24px;\n                    color: #666;\n                    cursor: pointer;\n                    padding: 0 8px;\n                    transition: color 0.3s;\n                }\n        \n                .vpadmin-profile-dialog-close:hover {\n                    color: #ff4757;\n                }\n        \n                .vpadmin-profile-dialog-body {\n                    padding: 20px;\n                }\n        \n                .vpadmin-profile-container {\n                    padding: 20px;\n                }\n        \n                .vpadmin-profile-header {\n                    display: flex;\n                    justify-content: center;\n                    margin-bottom: 24px;\n                }\n        \n                .vpadmin-profile-avatar {\n                    width: 80px;\n                    height: 80px;\n                    border-radius: 40px;\n                    background-color: #ecf5ff;\n                    padding: 8px;\n                    transition: transform 0.3s ease;\n                }\n        \n                .vpadmin-profile-avatar:hover {\n                    transform: scale(1.05);\n                }\n        \n                .vpadmin-profile-items {\n                    display: flex;\n                    flex-direction: column;\n                    gap: 20px;\n                }\n        \n                .vpadmin-profile-item {\n                    display: flex;\n                    align-items: center;\n                    padding: 12px;\n                    border-radius: 6px;\n                    background-color: #ecf5ff;\n                    transition: background-color 0.3s ease;\n                }\n        \n                .vpadmin-profile-item:hover {\n                    background-color: #e6f0fd;\n                }\n        \n                .vpadmin-icon-wrapper {\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    width: 24px;\n                    height: 24px;\n                    margin-right: 12px;\n                    color: #409eff;\n                }\n        \n                .vpadmin-profile-label {\n                    font-weight: 500;\n                    color: #606266;\n                    width: 120px;\n                    flex-shrink: 0;\n                    margin-right: 12px;\n                }\n        \n                .vpadmin-profile-value {\n                    color: #303133;\n                    word-break: break-all;\n                    flex: 1;\n                }\n        \n                @media (max-width: 480px) {\n                    .vpadmin-profile-dialog {\n                        width: 95%;\n                        margin: 10px;\n                    }\n                    \n                    .vpadmin-profile-container {\n                        padding: 15px;\n                    }\n                    \n                    .vpadmin-profile-dialog-body {\n                        padding: 15px;\n                    }\n                    \n                    .vpadmin-profile-label {\n                        width: 80px;\n                    }\n                }\n            ",document.head.appendChild(t);e.querySelector(".vpadmin-profile-dialog-close").addEventListener("click",(()=>{document.body.removeChild(e)})),e.addEventListener("click",(n=>{n.target})),document.body.appendChild(e)}function vn(n){const e={...{paymentPlatform:"",paymentType:"donation",buttonText:"Upgrade to Pro",iframeUrl:"",paymentName:"",needLogin:"true",size:"default",container:document.body},...n},t=document.createElement("button");t.className="small"===e.size?"vpadmin-pro-button-small":"vpadmin-pro-button",t.innerHTML=`<span class="${"small"===e.size?"vpadmin-pro-text-small":"vpadmin-pro-text"}">${e.buttonText}</span>`;const o=document.createElement("div");o.className="vpadmin-pro-dialog",o.style.display="none",o.innerHTML=`\n                <div class="vpadmin-pro-dialog-content">\n                    <div class="vpadmin-pro-dialog-header">\n                        <h3  id="proDialogTitle">Upgrade to Pro</h3>\n                        <button class="vpadmin-pro-dialog-close">&times;</button>\n                    </div>\n                    <div class="vpadmin-pro-dialog-body">\n                        <div id="user-guide" class="vpadmin-user-guide">\n                            <span>${d("useEmailTip")}<span id="userEmailDisplay" style="color: red"></span></span>\n                            <button class="vpadmin-copy-button">\n                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>\n                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>\n                                </svg>\n                                ${d("copy")}\n                            </button>\n                            <button class="vpadmin-help-button">\n                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                                    <circle cx="12" cy="12" r="10"></circle>\n                                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>\n                                    <line x1="12" y1="17" x2="12.01" y2="17"></line>\n                                </svg>\n                                ${d("help")}\n                            </button>\n                        </div>\n                        <div class="vpadmin-iframe-container">\n                            <div id="loadingOverlay" class="vpadmin-loading-overlay">\n                                <div class="vpadmin-loading-spinner"></div>\n                            </div>\n                            <iframe id="paymentIframe" class="vpadmin-pro-iframe"></iframe>\n                        </div>\n                    </div>\n                </div>\n            `,o.querySelector("#proDialogTitle").textContent=e.buttonText;const a=o.querySelector(".vpadmin-user-guide");if("true"===e.needLogin){o.querySelector(".vpadmin-copy-button").addEventListener("click",(()=>{const n=document.getElementById("userEmailDisplay").textContent;navigator.clipboard.writeText(n).then((()=>{gn(d("emailCopied"),"success")})).catch((()=>{gn(d("copyFailed"),"error")}))}));o.querySelector(".vpadmin-help-button").addEventListener("click",(()=>{const n=document.createElement("div"),e=i("vpadmin/payment-user-guide.html");n.className="vpadmin-help-dialog vpadmin-modal-overlay",n.innerHTML=`\n                    <div class="vpadmin-modal-content">\n                        <div class="vpadmin-modal-header">\n                            <h3>Upgrade Guide</h3>\n                            <button class="vpadmin-modal-close">&times;</button>\n                        </div>\n                        <div class="vpadmin-modal-body">\n                            <iframe src="${e}" class="vpadmin-help-iframe"></iframe>\n                        </div>\n                    </div>\n                `,document.body.appendChild(n),n.style.display="flex";n.querySelector(".vpadmin-modal-close").addEventListener("click",(()=>{document.body.removeChild(n)}))}))}else a.style.display="none";const r=document.createElement("style");r.textContent="\n                .vpadmin-pro-button {\n                    background: linear-gradient(135deg, #ff6b6b, #ff4757);\n                    border: none;\n                    padding: 2px 8px;\n                    border-radius: 6px;\n                    transition: all 0.3s ease;\n                    cursor: pointer;\n                    height: 30px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                }\n                \n                .vpadmin-pro-button:hover {\n                    background: linear-gradient(135deg, #ff4757, #ff3e4d);\n                    box-shadow: 0 4px 6px rgba(255, 71, 87, 0.3);\n                    transform: translateY(-1px);\n                }\n                \n                .vpadmin-pro-button-small {\n                    background: linear-gradient(135deg, #ff6b6b, #ff4757);\n                    border: none;\n                    padding: 2px 8px;\n                    border-radius: 4px;\n                    transition: all 0.3s ease;\n                    cursor: pointer;\n                    font-size: 12px;\n                    height: 20px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                }\n                \n                .vpadmin-pro-button-small:hover {\n                    background: linear-gradient(135deg, #ff4757, #ff3e4d);\n                    box-shadow: 0 2px 4px rgba(255, 71, 87, 0.3);\n                    transform: translateY(-1px);\n                }\n                \n                .vpadmin-pro-text {\n                    color: white;\n                    font-weight: 600;\n                    font-size: 14px;\n                    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n                }\n                \n                .vpadmin-pro-text-small {\n                    color: white;\n                    font-weight: 500;\n                    font-size: 12px;\n                    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n                }\n                \n                .vpadmin-pro-dialog {\n                    position: fixed;\n                    top: 0;\n                    left: 0;\n                    width: 100%;\n                    height: 100%;\n                    background-color: rgba(0, 0, 0, 0.5);\n                    z-index: 10000;\n                    display: none;\n                }\n                \n                .vpadmin-pro-dialog-content {\n                    position: absolute;\n                    top: 50%;\n                    left: 50%;\n                    transform: translate(-50%, -50%);\n                    background-color: white;\n                    border-radius: 8px;\n                    width: 90%;\n                    max-width: 600px;\n                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n                }\n                \n                .vpadmin-pro-dialog-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    padding: 16px 20px;\n                    border-bottom: 1px solid #eee;\n                }\n                \n                .vpadmin-pro-dialog-header h3 {\n                    margin: 0;\n                    font-size: 18px;\n                    color: #333;\n                }\n                \n                .vpadmin-pro-dialog-close {\n                    background: none;\n                    border: none;\n                    font-size: 24px;\n                    color: #666;\n                    cursor: pointer;\n                    padding: 0 8px;\n                    transition: color 0.3s;\n                }\n                \n                .vpadmin-pro-dialog-close:hover {\n                    color: #ff4757;\n                }\n                \n                .vpadmin-pro-dialog-body {\n                    padding: 20px;\n                }\n                \n                .vpadmin-iframe-container {\n                    position: relative;\n                    width: 100%;\n                    height: 500px;\n                    border-radius: 4px;\n                    overflow: hidden;\n                }\n                \n                .vpadmin-pro-iframe {\n                    width: 100%;\n                    height: 100%;\n                    border: none;\n                }\n                \n                .vpadmin-loading-overlay {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    width: 100%;\n                    height: 100%;\n                    background-color: rgba(255, 255, 255, 0.8);\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                    z-index: 1000;\n                }\n        \n                .vpadmin-loading-spinner {\n                    border: 5px solid #f3f3f3;\n                    border-top: 5px solid #3498db;\n                    border-radius: 50%;\n                    width: 50px;\n                    height: 50px;\n                    animation: spin 1s linear infinite;\n                }\n        \n                @keyframes spin {\n                    0% { transform: rotate(0deg); }\n                    100% { transform: rotate(360deg); }\n                }\n                \n                .vpadmin-user-guide {\n                    background-color: #f8f9fa;\n                    padding: 12px 16px;\n                    border-radius: 6px;\n                    margin-bottom: 16px;\n                    display: flex;\n                    align-items: center;\n                    gap: 12px;\n                }\n                \n                .vpadmin-user-guide span {\n                    color: #666;\n                    font-size: 14px;\n                }\n                \n                #userEmailDisplay {\n                    font-weight: 600;\n                    color: #333;\n                }\n                \n                .vpadmin-confirm-dialog {\n                    position: fixed;\n                    top: 0;\n                    left: 0;\n                    width: 100%;\n                    height: 100%;\n                    background-color: rgba(0, 0, 0, 0.5);\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                    z-index: 10001;\n                }\n                \n                .vpadmin-confirm-content {\n                    background: white;\n                    padding: 24px;\n                    border-radius: 8px;\n                    width: 90%;\n                    max-width: 400px;\n                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n                }\n                \n                .vpadmin-confirm-content h3 {\n                    margin: 0 0 16px 0;\n                    font-size: 18px;\n                    color: #333;\n                }\n                \n                .vpadmin-confirm-content p {\n                    margin: 0 0 20px 0;\n                    color: #666;\n                    font-size: 14px;\n                    line-height: 1.5;\n                }\n                \n                .vpadmin-confirm-buttons {\n                    display: flex;\n                    justify-content: flex-end;\n                    gap: 12px;\n                }\n                \n                .vpadmin-confirm-buttons button {\n                    padding: 8px 20px;\n                    border-radius: 4px;\n                    cursor: pointer;\n                    font-size: 14px;\n                    transition: all 0.2s;\n                }\n                \n                .vpadmin-confirm-no:hover {\n                    background: #f1f1f1;\n                    border-color: #ccc;\n                }\n                \n                .vpadmin-help-dialog {\n                    z-index: 10002;\n                }\n                \n                .vpadmin-help-dialog .vpadmin-modal-content {\n                    width: 90%;\n                    max-width: 800px;\n                    height: 80vh;\n                    display: flex;\n                    flex-direction: column;\n                }\n                \n                .vpadmin-modal-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    padding: 16px;\n                    border-bottom: 1px solid #eee;\n                }\n                \n                .vpadmin-modal-body {\n                    flex: 1;\n                    padding: 0;\n                    overflow: hidden;\n                }\n                \n                .vpadmin-help-iframe {\n                    width: 100%;\n                    height: 100%;\n                    border: none;\n                }\n                \n                .vpadmin-confirm-header {\n                    margin-bottom: 16px;\n                }\n                \n                .vpadmin-confirm-body {\n                    margin-bottom: 24px;\n                }\n                \n                .vpadmin-confirm-footer {\n                    display: flex;\n                    flex-direction: column;\n                    gap: 12px;\n                }\n                \n                .vpadmin-confirm-yes,\n                .vpadmin-confirm-no {\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    gap: 8px;\n                    width: 100%;\n                    padding: 12px;\n                    border-radius: 4px;\n                    font-weight: 600;\n                    transition: all 0.2s;\n                }\n                \n                .vpadmin-confirm-yes {\n                    background-color: #67c23a;\n                    color: white;\n                    border: none;\n                }\n                \n                .vpadmin-confirm-yes:hover {\n                    background-color: #85ce61;\n                }\n                \n                .vpadmin-confirm-no {\n                    background-color: #f56c6c;\n                    color: white;\n                    border: none;\n                }\n                \n                .vpadmin-confirm-no:hover {\n                    background-color: #f78989;\n                }\n                \n                .vpadmin-copy-button,\n                .vpadmin-help-button {\n                    display: inline-flex;\n                    align-items: center;\n                    gap: 6px;\n                    padding: 1px 2px;\n                    border: 1px solid #dcdfe6;\n                    border-radius: 4px;\n                    background-color: white;\n                    color: #606266;\n                    transition: all 0.2s;\n                    font-size: 14px;\n                    width: 60px;\n                }\n                \n                .vpadmin-copy-button:hover,\n                .vpadmin-help-button:hover {\n                    background-color: #f5f7fa;\n                    border-color: #c6e2ff;\n                    color: #409eff;\n                }\n                \n                .vpadmin-copy-button svg,\n                .vpadmin-help-button svg {\n                    stroke: currentColor;\n                }\n                \n                @media (max-width: 480px) {\n                    .vpadmin-pro-dialog-content {\n                        width: 95%;\n                        margin: 10px;\n                    }\n                \n                    .vpadmin-iframe-container {\n                        height: 400px;\n                    }\n                \n                    .vpadmin-user-guide {\n                        flex-direction: column;\n                        align-items: flex-start;\n                        gap: 8px;\n                    }\n                \n                    .vpadmin-confirm-content {\n                        margin: 20px;\n                        padding: 16px;\n                    }\n                \n                    .vpadmin-confirm-buttons {\n                        flex-direction: column;\n                    }\n                \n                    .vpadmin-confirm-buttons button {\n                        width: 100%;\n                    }\n                    \n                    .vpadmin-help-dialog .vpadmin-modal-content {\n                        width: 95%;\n                        height: 90vh;\n                    }\n                \n                    .vpadmin-confirm-footer {\n                        gap: 8px;\n                    }\n                \n                    .vpadmin-confirm-yes,\n                    .vpadmin-confirm-no {\n                        padding: 10px;\n                        font-size: 14px;\n                    }\n                }\n            ",document.head.appendChild(r);const s=o.querySelector("#paymentIframe"),l=o.querySelector("#loadingOverlay");function c({title:n,content:t,onConfirm:o,onCancel:i}){const a=document.createElement("div");a.className="vpadmin-confirm-dialog",a.innerHTML=`\n                    <div class="vpadmin-confirm-content">\n                        <div class="vpadmin-confirm-header">\n                            <h3>${n}</h3>\n                        </div>\n                        <div class="vpadmin-confirm-body">\n                            <p>${t}</p>\n                        </div>\n                        <div class="vpadmin-confirm-footer">\n                            <button class="vpadmin-confirm-yes">\n                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                                    <path d="M20 6L9 17l-5-5"/>\n                                </svg>\n                                ${d("paymentSuccessful")}\n                            </button>\n                            <button class="vpadmin-confirm-no">\n                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                                    <circle cx="12" cy="12" r="10"/>\n                                    <line x1="15" y1="9" x2="9" y2="15"/>\n                                    <line x1="9" y1="9" x2="15" y2="15"/>\n                                </svg>\n                                ${d("notPaidYet")}\n                            </button>\n                        </div>\n                    </div>\n                `;const r=a.querySelector(".vpadmin-confirm-yes"),s=a.querySelector(".vpadmin-confirm-no"),l=async n=>{try{(await x("/vpadmin/paymentLog",{method:"POST",headers:{"Content-Type":"application/json",isToken:"true"},body:{paymentName:e.paymentName,paymentConfirm:n,paymentLink:e.iframeUrl,userEmail:document.getElementById("userEmailDisplay").textContent,clientId:p,paymentPlatform:e.paymentPlatform,paymentType:e.paymentType}})).code}catch(n){console.error("Error recording payment status:",n)}};r.addEventListener("click",(async()=>{await l("1"),document.body.removeChild(a),o&&o()})),s.addEventListener("click",(async()=>{document.body.removeChild(a),i&&i()})),document.body.appendChild(a)}s.onload=function(){l.style.display="none"},t.addEventListener("click",(()=>{const n=localStorage.getItem("accessToken");if("true"!==e.needLogin||n){if("true"===e.needLogin){const n=JSON.parse(localStorage.getItem("userInfo")).user.email;document.getElementById("userEmailDisplay").textContent=n}if("donation"===e.paymentType.toLowerCase()){document.getElementById("paymentIframe").src=`${e.iframeUrl}?timestamp=${Date.now()}`,o.style.display="block",l.style.display="flex"}else if("shop"===e.paymentType.toLowerCase()){const n=800,t=600,o=`width=${n},height=${t},left=${(window.screen.width-n)/2},top=${(window.screen.height-t)/2},resizable=yes,scrollbars=yes,status=yes`;window.open(e.iframeUrl,"ShopPaymentWindow",o)}}else gn(d("pleaseLogin"),"error")}));const m=o.querySelector(".vpadmin-pro-dialog-close");return"true"===e.needLogin?m.addEventListener("click",(()=>{c({title:d("paymentConfirm"),content:d("paymentConfirmContent"),onConfirm:()=>{o.style.display="none"},onCancel:()=>{o.style.display="none"}})})):m.addEventListener("click",(()=>{o.style.display="none"})),e.container.appendChild(t),document.body.appendChild(o),{button:t,dialog:o,show:()=>o.style.display="block",hide:()=>o.style.display="none"}}z.addEventListener("click",(function(){P.style.display="none"})),window.addEventListener("click",(function(n){n.target})),M.addEventListener("submit",(async function(n){n.preventDefault();const e=Y("registerEmail",X),t=Y("registerPassword",nn),o=Y("confirmPassword",en);if(!e||!t||!o)return;const i=document.getElementById("registerEmail").value,a=document.getElementById("registerPassword").value,r=document.getElementById("registerCaptcha").value,s=document.getElementById("registerCaptchaImage").dataset.uuid;try{const n=await x("/auth/register",{method:"POST",headers:{isToken:"false",isEncrypt:"true",repeatSubmit:"false"},body:{tenantId:g,username:i,password:a,confirmPassword:a,clientId:p,grantType:m,userType:"portal_user",code:r,uuid:s}});if(200!==n.code)throw new Error(n.msg||d("registerFailed"));gn(d("registerSuccess"),"success"),W("loginForm"),an("captchaImage")}catch(n){gn(d("registerFailed")+": "+n.message,"error"),an("registerCaptchaImage")}})),document.getElementById("sendEmailCode").addEventListener("click",(async function(){const n=this,e=n.querySelector(".button-text"),t=(n.querySelector(".button-loader"),document.getElementById("forgotEmail").value),o=document.getElementById("forgotCaptcha").value,i=document.getElementById("forgotCaptchaImage").dataset.uuid;if(Y("forgotEmail",X)){n.disabled=!0,n.classList.add("loading");try{const a=await x("/resource/email/code",{method:"POST",headers:{"Content-Type":"application/json",isToken:"false"},body:JSON.stringify({email:t,tenantId:g,code:o,uuid:i,clientId:p})});if(200!==a.code)throw new Error(a.msg||d("sendEmailCodeFailed"));{gn(d("emailCodeSent"),"success"),s=t,on(2);let o=60;const i=setInterval((()=>{o>0?(e.textContent=`${d("resending")} (${o}s)`,o--):(clearInterval(i),e.textContent=d("sendEmailCode"),n.disabled=!1)}),1e3)}}catch(n){gn(d("sendEmailCodeFailed"),"error"),an("forgotCaptchaImage")}finally{n.classList.remove("loading")}}})),document.getElementById("verifyEmailCode").addEventListener("click",(async function(){const n=document.getElementById("emailCode").value;try{const e=await x("/auth/verify/emailCode",{method:"POST",headers:{"Content-Type":"application/json",isToken:"false"},body:JSON.stringify({email:s,code:n,tenantId:g,clientId:p})});if(200!==e.code)throw new Error(e.msg||d("verifyCodeFailed"));document.getElementById("emailCode").dataset.verifiedCode=n,on(3)}catch(n){gn(d("verifyCodeFailed"),"error")}})),document.getElementById("forgotPasswordForm").addEventListener("submit",(async function(n){if(n.preventDefault(),3!==r)return;const e=document.getElementById("forgotNewPassword").value,t=document.getElementById("emailCode").value,o=Y("forgotNewPassword",nn),i=Y("forgotConfirmNewPassword",tn);if(o&&i)try{const n=await x("/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json",isToken:"false"},body:JSON.stringify({email:s,newPassword:e,code:t,clientId:p,tenantId:g})});if(200!==n.code)throw new Error(n.msg||d("resetPasswordFailed"));gn(d("passwordResetSuccess"),"success"),W("loginForm")}catch(n){gn(d("resetPasswordFailed"),"error")}})),F.addEventListener("submit",(async function(n){n.preventDefault();const e=document.getElementById("loginEmail").value,t=document.getElementById("password").value,o=document.getElementById("captcha").value,i=document.getElementById("captchaImage").dataset.uuid;try{const n=await x("/auth/login",{method:"POST",headers:{isToken:"false",isEncrypt:"true",repeatSubmit:"false"},body:{clientId:p,grantType:m,tenantId:g,username:e,password:t,code:o,uuid:i}});await n;if(200!==n.code)throw new Error(n.msg||"Login failed");await ln(n.data)}catch(n){console.error("LoginFailed:",n),gn(d("loginFailed")+n.message,"error"),an("captchaImage")}})),Object.keys(l).forEach((n=>{document.getElementById(`${n}Login`).addEventListener("click",(()=>dn(n)))})),document.getElementById("registerLink").addEventListener("click",(n=>{n.preventDefault(),W("registerForm")})),document.getElementById("forgotPasswordLink").addEventListener("click",(n=>{n.preventDefault(),W("forgotPasswordForm")})),document.getElementById("backToLoginLink").addEventListener("click",(n=>{n.preventDefault(),W("loginForm")})),document.getElementById("backToLoginFromForgotLink").addEventListener("click",(n=>{n.preventDefault(),W("loginForm")})),document.getElementById("userProfileButton").addEventListener("click",(async function(n){n.preventDefault();const e=localStorage.getItem("accessToken");if(e)try{const n=await x("/system/user/profile",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(200!==n.code)throw new Error(n.msg||"Failed to get profile");un(n.data)}catch(n){console.error("Error fetching profile:",n),gn(d("failedToFetchProfile"),"error")}else gn(d("pleaseLogin"),"error")})),"complete"===document.readyState?sn():window.addEventListener("load",sn);function fn(){const n=document.createElement("div");n.className="vpadmin-modal-overlay",n.style.display="block",n.innerHTML=`\n                <div class="vpadmin-orders-dialog">\n                    <div class="vpadmin-orders-dialog-content">\n                        <div class="vpadmin-orders-dialog-header">\n                            <h3>${d("orderHistory")}</h3>\n                            <button class="vpadmin-orders-dialog-close">&times;</button>\n                        </div>\n                        <div class="vpadmin-orders-dialog-body">\n                            <div class="vpadmin-orders-container">\n                                <div class="vpadmin-orders-loading" style="display: none;">\n                                    <div class="vpadmin-orders-loading-spinner"></div>\n                                    <span>${d("loadingOrders")}</span>\n                                </div>\n                                <table class="vpadmin-orders-table">\n                                    <thead>\n                                        <tr>\n                                            <th>${d("orderId")}</th>\n                                            <th>${d("orderName")}</th>\n                                            <th>${d("status")}</th>\n                                            <th>${d("orderTime")}</th>\n                                            <th>${d("message")}</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        \x3c!-- Orders will be inserted here --\x3e\n                                    </tbody>\n                                </table>\n                                <div class="vpadmin-orders-empty" style="display: none;">\n                                    ${d("noOrders")}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            `;const e=document.createElement("style");e.textContent="\n                .vpadmin-orders-dialog {\n                    position: fixed;\n                    top: 50%;\n                    left: 50%;\n                    transform: translate(-50%, -50%);\n                    background: white;\n                    border-radius: 8px;\n                    width: 90%;\n                    max-width: 900px;\n                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n                    z-index: 10001;\n                }\n        \n                .vpadmin-orders-dialog-content {\n                    position: relative;\n                    background-color: white;\n                    border-radius: 8px;\n                    overflow: hidden;\n                    height: 80vh;\n                    display: flex;\n                    flex-direction: column;\n                }\n        \n                .vpadmin-orders-dialog-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    padding: 16px 20px;\n                    border-bottom: 1px solid #eee;\n                }\n        \n                .vpadmin-orders-dialog-header h3 {\n                    margin: 0;\n                    font-size: 18px;\n                    color: #333;\n                }\n        \n                .vpadmin-orders-dialog-close {\n                    background: none;\n                    border: none;\n                    font-size: 24px;\n                    color: #666;\n                    cursor: pointer;\n                    padding: 0 8px;\n                    transition: color 0.3s;\n                }\n        \n                .vpadmin-orders-dialog-close:hover {\n                    color: #ff4757;\n                }\n        \n                .vpadmin-orders-dialog-body {\n                    padding: 20px;\n                    flex: 1;\n                    overflow: auto;\n                }\n        \n                .vpadmin-orders-container {\n                    position: relative;\n                    min-height: 200px;\n                }\n        \n                .vpadmin-orders-table {\n                    width: 100%;\n                    border-collapse: collapse;\n                    border-spacing: 0;\n                }\n        \n                .vpadmin-orders-table th,\n                .vpadmin-orders-table td {\n                    padding: 12px;\n                    text-align: left;\n                    border-bottom: 1px solid #eee;\n                }\n        \n                .vpadmin-orders-table th {\n                    background-color: #f8f9fa;\n                    font-weight: 600;\n                    color: #606266;\n                }\n        \n                .vpadmin-orders-table tbody tr:hover {\n                    background-color: #f5f7fa;\n                }\n        \n                .vpadmin-orders-status {\n                    display: inline-block;\n                    padding: 4px 8px;\n                    border-radius: 4px;\n                    font-size: 12px;\n                    font-weight: 500;\n                }\n        \n                .vpadmin-orders-status-pending {\n                    background-color: #e6a23c;\n                    color: white;\n                }\n        \n                .vpadmin-orders-status-success {\n                    background-color: #67c23a;\n                    color: white;\n                }\n        \n                .vpadmin-orders-status-failed {\n                    background-color: #f56c6c;\n                    color: white;\n                }\n        \n                .vpadmin-orders-loading {\n                    position: absolute;\n                    top: 50%;\n                    left: 50%;\n                    transform: translate(-50%, -50%);\n                    text-align: center;\n                }\n        \n                .vpadmin-orders-loading-spinner {\n                    border: 3px solid #f3f3f3;\n                    border-radius: 50%;\n                    border-top: 3px solid #3498db;\n                    width: 24px;\n                    height: 24px;\n                    animation: vpadmin-spin 1s linear infinite;\n                    margin: 0 auto 8px;\n                }\n        \n                .vpadmin-orders-empty {\n                    text-align: center;\n                    color: #909399;\n                    padding: 24px;\n                }\n        \n                @keyframes vpadmin-spin {\n                    0% { transform: rotate(0deg); }\n                    100% { transform: rotate(360deg); }\n                }\n        \n                @media (max-width: 768px) {\n                    .vpadmin-orders-dialog {\n                        width: 95%;\n                        margin: 10px;\n                    }\n        \n                    .vpadmin-orders-table th,\n                    .vpadmin-orders-table td {\n                        padding: 8px;\n                        font-size: 14px;\n                    }\n        \n                    .vpadmin-orders-dialog-body {\n                        padding: 10px;\n                    }\n                }\n            ",e.textContent+="\n                .vpadmin-message-button {\n                    padding: 4px 8px;\n                    background-color: #409eff;\n                    color: white;\n                    border: none;\n                    border-radius: 4px;\n                    cursor: pointer;\n                    font-size: 12px;\n                    transition: all 0.3s;\n                }\n        \n                .vpadmin-message-button:hover {\n                    background-color: #66b1ff;\n                }\n        \n                .vpadmin-message-dialog {\n                    position: fixed;\n                    top: 50%;\n                    left: 50%;\n                    transform: translate(-50%, -50%);\n                    background: white;\n                    padding: 20px;\n                    border-radius: 8px;\n                    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\n                    z-index: 10002;\n                    max-width: 500px;\n                    width: 90%;\n                }\n        \n                .vpadmin-message-dialog-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    margin-bottom: 16px;\n                    padding-bottom: 8px;\n                    border-bottom: 1px solid #eee;\n                }\n        \n                .vpadmin-message-dialog-title {\n                    margin: 0;\n                    font-size: 16px;\n                    color: #333;\n                }\n        \n                .vpadmin-message-dialog-close {\n                    background: none;\n                    border: none;\n                    font-size: 20px;\n                    color: #666;\n                    cursor: pointer;\n                    padding: 4px;\n                }\n        \n                .vpadmin-message-dialog-close:hover {\n                    color: #f56c6c;\n                }\n        \n                .vpadmin-message-content {\n                    line-height: 1.6;\n                    color: #666;\n                    max-height: 300px;\n                    overflow-y: auto;\n                    padding: 8px;\n                    background: #f8f9fa;\n                    border-radius: 4px;\n                    white-space: pre-wrap;\n                    word-wrap: break-word;\n                }\n        \n                @media (max-width: 768px) {\n                    .vpadmin-message-dialog {\n                        width: 95%;\n                        margin: 10px;\n                    }\n                }\n            ",document.head.appendChild(e),document.body.appendChild(n),hn(n);n.querySelector(".vpadmin-orders-dialog-close").addEventListener("click",(()=>{document.body.removeChild(n)})),n.addEventListener("click",(n=>{n.target}))}async function hn(n){const e=n.querySelector(".vpadmin-orders-loading"),t=n.querySelector(".vpadmin-orders-table tbody"),o=n.querySelector(".vpadmin-orders-empty");e.style.display="block",t.innerHTML="",o.style.display="none";try{const n=await x("/vpadmin/paymentLog/listAll",{method:"GET",headers:{"Content-Type":"application/json",isToken:"true"}});if(200!==n.code)throw new Error(n.msg||d("failedToLoadOrders"));{const e=n.data;if(0===e.length)return void(o.style.display="block");const i=e.map((n=>`\n                <tr>\n                    <td>${n.id}</td>\n                    <td>${n.paymentName}</td>\n                    <td>\n                        <span class="vpadmin-orders-status ${wn(n.status)}">\n                            ${bn(n.status)}\n                        </span>\n                    </td>\n                    <td>${n.createTime}</td>\n                    <td>\n                        ${n.replyContent?`\n                            <button class="vpadmin-message-button" data-message="${yn(n.replyContent)}">\n                                Details\n                            </button>\n                        `:""}\n                    </td>\n                </tr>\n            `)).join("");t.innerHTML=i,t.querySelectorAll(".vpadmin-message-button").forEach((n=>{n.addEventListener("click",(function(){const n=this.getAttribute("data-message"),e=document.createElement("div");e.className="vpadmin-modal-overlay",e.style.display="block",e.innerHTML=`\n                        <div class="vpadmin-message-dialog">\n                            <div class="vpadmin-message-dialog-header">\n                                <h3 class="vpadmin-message-dialog-title">${d("messageDetails")}</h3>\n                                <button class="vpadmin-message-dialog-close">&times;</button>\n                            </div>\n                            <div class="vpadmin-message-content">${n}</div>\n                        </div>\n                    `,document.body.appendChild(e),e.addEventListener("click",(n=>{n.target.classList.contains("vpadmin-message-dialog-close")&&document.body.removeChild(e)}))}))}))}}catch(n){console.error("Error loading orders:",n),gn(d("errorLoadingOrders"),"error"),o.textContent=d("errorLoadingOrders"),o.style.display="block"}finally{e.style.display="none"}}function yn(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function wn(n){switch(n){case"0":default:return"vpadmin-orders-status-pending";case"1":return"vpadmin-orders-status-success";case"2":return"vpadmin-orders-status-failed"}}function bn(n){switch(n){case"0":return d("statusPending");case"1":return d("statusSuccess");case"2":return d("statusFailed");default:return d("statusUnknown")}}document.getElementById("userOrdersButton").addEventListener("click",(async function(n){n.preventDefault();localStorage.getItem("accessToken")?fn():gn(d("pleaseLogin"),"error")}));localStorage.getItem("accessToken")?(t=!0,a=i("vpadmin/profile_blue.svg"),cn().then(mn)):mn();function xn(){window.dispatchEvent(new CustomEvent("vpadminInitialized"))}window.createUpgradeButton=vn,xn(),console.log("VpAdmin Menus are created")}(window.CryptoJS,window.JSEncrypt)}catch(n){console.error("Init failed:",n)}})).catch((n=>{console.error("Failed to load required libraries:",n)}))}();